<% if @loading == true  %>
<div class="loading">
    <% if user_signed_in? %>
        <h1 class="loading-text">こんにちは、<%= current_user.name %>さん。</h1>
    <% end %>
    <div class="animation"></div>
</div>
<% end %>
<div class="contents-wrap">
    <!-- メッセージの入力 -->
    <div class="message-wrap">
        <%= form_with model: @post, id: "message_form", onsubmit: "return hiraganacheck()" do |f| %>
            <%= f.text_area :message, :class => "textbox", :placeholder => "かいてみる？", :onblur => "return hiraganacheck()" %>

            <%= image_submit_tag("bottle_slh.png", id: "send") %>
            <!-- 送信前に確認したい場合 -->
            <!--<%= image_submit_tag("send.png", id: "send", data: { confirm: "メッセージを放流しますか？"}) %>-->
        <% end %>
    </div>

    <div class="error">
        <p>ひらがな　と　いちぶのきごう　だけ　にゅうりょく　してね</p>
    </div>

    <!-- 未読が存在する時アイコンを表示 -->
    <div class="unread-icon">
        <%= image_tag("new.png", :class => "unread-icon") %>
    </div>

    <div class="unread-receive-icon">
        <%= image_tag("new.png", :class => "unread-receive-icon") %>
    </div>

    <div class="write-icon">
        <%= image_tag("pencil.png", :class => "write-icon") %>
    </div>

    <!-- グレーアウト -->
    <div id="overlay"></div>
</div>
<div class="back-img">
    <%= image_tag("neko.png", :id => "cat") %>
</div>

<script>
    function hiraganacheck() {
        message = $("#message").val();
        if(message.match(/[^ぁ-ん０-９0-9ー〜！？!?、。「」^ \r　\n\ \s]+/ )){
            $("#message").css("box-shadow", "0px 0px 10px red");
            $(".error").fadeIn();
            return false;
        }else{
            $("#message").css("box-shadow","");
            $(".error").fadeOut();
            return true;
        }
    }
</script>
